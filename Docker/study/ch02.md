# 2장 도커의 기본적인 사용법

## 컨테이너란?

* 도커 컨테이너는 애플리케이션과 애플리케이션을 실행할 컴퓨터(호스트명, IP 주소, 파일 시스템)를 담고 있는 상자와 같다. 여기서 호스트명, IP 주소, 파일 시스템은 모두 도커가 만들어낸 가상 리소스다.
* 컨테이너는 여러 개를 실행할 수 있으며, 컨테이너 내부에서는 외부의 환경을 볼 수 없다. 이렇게 컨테이너는 서로 독립적인 환경을 갖지만 각 컨테이너들은 실행되는 컴퓨터의 CPU와 메모리, 운영체제를 공유한다.
* 컨테이너 기술 외에 격리와 밀집을 만족하기 위해 할 수 있는 시도는 가상 머신을 사용하는 것이다.
  * 각 가상 머신은 컨테이너와 마찬가지로 독립적인 호스트명, IP 주소, 파일 시스템을 가진다.
  * 하지만 컨테이너와 달리 각 가상 머신은 호스트 컴퓨터의 운영체제를 공유하지 않고 별도의 운영체제를 가지고 있기 때문에, 애플리케이션이 사용해야 할 CPU와 메모리 자원을 상당량 차지하고 운영체제의 라이선스 비용과 운영체제 업데이트 설치 부담이 추가로 생긴다.



## 컨테이너 명령어

### 컨테이너 생성 및 실행

`docker container run` 명령어는 도커 컨테이너를 **생성** ( `docker container create` )하고 **실행** ( `docker container run`) 하는 기능을 한다. 만약 컨테이너 생성에 필요한 이미지가 필요하다면 **이미지를 내려받는 기능** ( `docker image pull` )도 겸한다.

```sh
docker container run --name <CONTAINER ID> -d <IMAGE ID>
```

| 옵션                               | 내용                                   |
| ---------------------------------- | -------------------------------------- |
| `--name CONTAINER NAME`            | 컨테이너 이름을 지정함                 |
| `--detach` , `-d`                  | 백그라운드로 실행함                    |
| `--interactive` , `-i`             | 컨테이너에 접속된 상태로 만듬          |
| `--tty` , `-t`                     | 터미널 세션을 통해 컨테이너 조작       |
| `--publish` , `-p`                 | 컨테이너의 포트를 호스트 컴퓨터에 공개 |
| `--env KEY=VALUE` , `-e KEY=VALUE` | 실행시킬 컨테이너의 환경 변수를 설정   |

### 컨테이너 정지

```sh
docker container stop <CONTAINER ID>
```

### 컨테이너 삭제

⚠️ 컨테이너를 삭제하려면 먼저 반드시 컨테이너를 정지시켜야 한다.

```sh
docker container rm <CONTAINER ID>
```

### 컨테이너 목록 출력

현재 실행중인 컨테이너의 목록을 출력한다.

```sh
docker container ls -a
```

| 옵션 | 내용                                  |
| ---- | ------------------------------------- |
| `-a` | 정지 상태의 컨테이너 목록도 함께 출력 |

### 컨테이너에서 실행중인 프로세스 정보 출력

```sh
docker container top <CONTAINER ID>
```

### 컨테이너에서 수집된 로그 출력

```sh
docker container logs <CONTAINER ID>
```

### 컨테이너 상세 정보 출력

```sh
docker container inspect <CONTAINER ID>
```

### 컨테이너 상태 확인

대상 컨테이너의 CPU, 메모리, 네트워크, 디스크 사용량을 확인할 수 있다.

```sh
docker container stats <CONTAINER ID>
```

